<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: components/core-progress/core-progress.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: components/core-progress/core-progress.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// import templateString from './element-image.html';
import styleString from './core-progress.scss';

// create template element
// const template = document.createElement('template');
// template.innerHTML = templateString;

// create style element
const style = document.createElement('style');
style.innerHTML = styleString;

/**
 * &lt;element-image> component
 */
export default class CoreProgress extends HTMLElement {
  /**
   * constructor
   */
  constructor() {
    super();

    this._type = this.getAttribute('type') || 'line';
    this._percentage = this.getAttribute('percentage') || 0;
    this._status = this.getAttribute('status') || undefined;
    this._strokeWidth = this.getAttribute('stroke-width') || 6;
    this._textInside = this.hasAttribute('text-inside') || false; // this.hasAttribute('text-inside')
    this._width = this.getAttribute('width') || 126;
    this._showText = this.hasAttribute('show-text') || true; // true
    this._color = this.getAttribute('color') || undefined;

    // define type
    Object.defineProperty(this, 'type', {
      get() {
        return this._type;
      },
      set(val) {
        if (['line', 'circle'].indexOf(val) > -1) {
          this._type = val;
          this.setAttribute('type', val);
        } else {
          this._type = 'line';
          this.setAttribute('type', 'line');
        }

        this._updateTemplate();
      },
    });

    // define percentage
    Object.defineProperty(this, 'percentage', {
      get() {
        return this._percentage;
      },
      set(val) {
        if (typeof val === 'number' &amp;&amp; val &lt;= 100 &amp;&amp; val >= 0) {
          this._percentage = val;
          this.setAttribute('percentage', val);
        } else {
          this._percentage = 0;
          this.setAttribute('percentage', 0);
        }

        this._updateTemplate();
      },
    });

    // define status
    Object.defineProperty(this, 'status', {
      get() {
        return this._status;
      },
      set(val) {
        if (['success', 'exception', 'text'].indexOf(val) > -1) {
          this._status = val;
          this.setAttribute('status', val);
        } else {
          this._status = undefined;
          this.removeAttribute('status');
        }

        this._updateTemplate();
      },
    });

    // define strokeWidth
    Object.defineProperty(this, 'strokeWidth', {
      get() {
        return this._strokeWidth;
      },
      set(val) {
        if (typeof val === 'number') {
          this._strokeWidth = val;
          this.setAttribute('stroke-width', val);
        } else {
          this._strokeWidth = 6;
          this.setAttribute('stroke-width', 6);
        }

        this._updateTemplate();
      },
    });

    // define textInside
    Object.defineProperty(this, 'textInside', {
      get() {
        return this._textInside;
      },
      set(val) {
        if (val === true) {
          this._textInside = true;
          this.setAttribute('text-inside', '');
        } else {
          this._textInside = false;
          this.removeAttribute('text-inside');
        }

        this._updateTemplate();
      },
    });

    // define width
    Object.defineProperty(this, 'width', {
      get() {
        return this._width;
      },
      set(val) {
        if (typeof val === 'number') {
          this._width = val;
          this.setAttribute('width', val);
        } else {
          this._width = 126;
          this.setAttribute('width', 126);
        }

        this._updateTemplate();
      },
    });

    // define showText
    Object.defineProperty(this, 'showText', {
      get() {
        return this._showText;
      },
      set(val) {
        if (val === true) {
          this._showText = true;
          this.setAttribute('show-text', '');
        } else {
          this._showText = false;
          this.removeAttribute('show-text');
        }

        this._updateTemplate();
      },
    });

    // define color
    Object.defineProperty(this, 'color', {
      get() {
        return this._color;
      },
      set(val) {
        if (typeof val === 'string') {
          this._color = val;
          this.setAttribute('color', val);
        } else {
          this._color = undefined;
          this.removeAttribute('color');
        }

        this._updateTemplate();
      },
    });

    this.attachShadow({mode: 'open'});
    this._template = document.createElement('template');
    this._updateTemplate();
  }

  /**
   * _updateTemplate()
   */
  _updateTemplate() {
    let progressBar = '';
    let progressCircle = '';

    if (this.type === 'line') {
      progressBar = `
        &lt;div class="el-progress-bar">
          &lt;div 
            class="el-progress-bar__outer" 
            style="height: ${this.strokeWidth + 'px'};"
          >
            &lt;div class="el-progress-bar__inner" style="${this.barStyle}">
              ${(this.showText &amp;&amp; this.textInside) ? `&lt;div class="el-progress-bar__innerText">${this.percentage}%&lt;/div>` : ''}
            &lt;/div>
          &lt;/div>
        &lt;/div>
      `;
    } else {
      progressCircle = `
        &lt;div class="el-progress-circle" style="height: ${this.width + 'px'}; width: ${this.width + 'px'}">
          &lt;svg viewBox="0 0 100 100">
            &lt;path 
              class="el-progress-circle__track" 
              d="${this.trackPath}" 
              stroke="#e5e9f2" 
              stroke-width=${this.relativeStrokeWidth} 
              fill="none">
            &lt;/path>
            &lt;path 
              class="el-progress-circle__path" 
              d="${this.trackPath}" 
              stroke-linecap="round" 
              stroke=${this.stroke} 
              stroke-width=${this.relativeStrokeWidth} 
              fill="none" 
              style="${this.circlePathStyle}">
            &lt;/path>
          &lt;/svg>
        &lt;/div>
      `;
    }

    this._template.innerHTML = `
      &lt;div
        class="${`el-progress el-progress--${this.type} 
          ${this.status !== undefined ? `is-${this.status}` : ``} 
          ${!this.showText ? 'el-progress--without-text' : ''} 
          ${this.textInside ? 'el-progress--text-inside' : ''}`}"
        role="progressbar"
        aria-valuenow=${this.percentage}
        aria-valuemin="0"
        aria-valuemax="100"
      >
        ${progressBar}
        ${progressCircle}
        ${(this.showText &amp;&amp; !this.textInside) ? ` 
          &lt;div class="el-progress__text" style="font-size: ${this.progressTextSize + 'px'}">
            ${this.status === undefined ? `${this.percentage}%` : `&lt;i class=${this.iconClass}>&lt;/i>`}
          &lt;/div>` : ''}
      &lt;/div>
    `;

    this.shadowRoot.innerHTML = '';
    this.shadowRoot.appendChild(this._template.content);
    this.shadowRoot.appendChild(style.cloneNode(true));
  }

  /**
   * barStyle getter
   */
  get barStyle() {
    return `width: ${this.percentage + '%'};` + ` ${this.color === null ? '' : 'background-color: ' + this.color + ';'}`;
  }

  /**
   * relativeStrokeWidth getter
   */
  get relativeStrokeWidth() {
    return (this.strokeWidth / this.width * 100).toFixed(1);
  }

  /**
   * trackPath getter
   */
  get trackPath() {
    const radius = parseInt(50 - parseFloat(this.relativeStrokeWidth) / 2, 10);
    return `M 50 50 m 0 -${radius} a ${radius} ${radius} 0 1 1 0 ${radius * 2} a ${radius} ${radius} 0 1 1 0 -${radius * 2}`;
  }

  /**
   * perimeter getter
   */
  get perimeter() {
    const radius = 50 - parseFloat(this.relativeStrokeWidth) / 2;
    return 2 * Math.PI * radius;
  }

  /**
   * circlePathStyle getter
   */
  get circlePathStyle() {
    const perimeter = this.perimeter;
    return `stroke-dasharray: ${perimeter}px ${perimeter}px; ` +
      `stroke-dashoffset: ${(1 - this.percentage / 100) * perimeter + 'px'}; ` +
      `transition: stroke-dashoffset 0.6s ease 0s, stroke 0.6s ease;`;
  }

  /**
   * stroke getter
   */
  get stroke() {
    let ret;
    if (this.color) {
      ret = this.color;
    } else {
      switch (this.status) {
        case 'success':
          ret = '#13ce66';
          break;
        case 'exception':
          ret = '#ff4949';
          break;
        default:
          ret = '#20a0ff';
      }
    }
    return ret;
  }

  /**
   * iconClass getter
   */
  get iconClass() {
    if (this.type === 'line') {
      return this.status === 'success' ? 'el-icon-circle-check' : 'el-icon-circle-close';
    } else {
      return this.status === 'success' ? 'el-icon-check' : 'el-icon-close';
    }
  }

  /**
   * progressTextSize getter
   */
  get progressTextSize() {
    return this.type === 'line'
      ? 12 + this.strokeWidth * 0.4
      : this.width * 0.111111 + 2;
  }
}

if (!customElements.get('core-progress')) {
  customElements.define('core-progress', CoreProgress);
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="Popper.modifiers.html">modifiers</a></li></ul><h3>Classes</h3><ul><li><a href="aria.html">aria</a></li><li><a href="CoreButton.html">CoreButton</a></li><li><a href="CoreHello.html">CoreHello</a></li><li><a href="coreModal.html">coreModal</a></li><li><a href="coreSlider.html">coreSlider</a></li><li><a href="fecha.html">fecha</a></li><li><a href="module.html#.exports">exports</a></li><li><a href="Popper.html">Popper</a></li></ul><h3>Global</h3><ul><li><a href="global.html#_addLazyLoadListener">_addLazyLoadListener</a></li><li><a href="global.html#_getImageStyle">_getImageStyle</a></li><li><a href="global.html#_handleError">_handleError</a></li><li><a href="global.html#_handleLazyLoad">_handleLazyLoad</a></li><li><a href="global.html#_handleLoad">_handleLoad</a></li><li><a href="global.html#_loadImage">_loadImage</a></li><li><a href="global.html#_removeLazyLoadListener">_removeLazyLoadListener</a></li><li><a href="global.html#_updateTemplate">_updateTemplate</a></li><li><a href="global.html#alignCenter">alignCenter</a></li><li><a href="global.html#attributeChangedCallback">attributeChangedCallback</a></li><li><a href="global.html#barStyle">barStyle</a></li><li><a href="global.html#circlePathStyle">circlePathStyle</a></li><li><a href="global.html#connectedCallback">connectedCallback</a></li><li><a href="global.html#content">content</a></li><li><a href="global.html#disconnectedCallback">disconnectedCallback</a></li><li><a href="global.html#error">error</a></li><li><a href="global.html#fit">fit</a></li><li><a href="global.html#iconClass">iconClass</a></li><li><a href="global.html#imageStyle">imageStyle</a></li><li><a href="global.html#lazy">lazy</a></li><li><a href="global.html#loading">loading</a></li><li><a href="global.html#observedAttributes">observedAttributes</a></li><li><a href="global.html#parse">parse</a></li><li><a href="global.html#perimeter">perimeter</a></li><li><a href="global.html#progressTextSize">progressTextSize</a></li><li><a href="global.html#relativeStrokeWidth">relativeStrokeWidth</a></li><li><a href="global.html#src">src</a></li><li><a href="global.html#stroke">stroke</a></li><li><a href="global.html#trackPath">trackPath</a></li></ul>
</nav>

<br class="clear">

<footer>
<<<<<<< HEAD
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.1</a> on Sun Jun 02 2019 05:55:05 GMT+0000 (Coordinated Universal Time)
=======
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.1</a> on Sun Jun 02 2019 04:56:46 GMT+0000 (Coordinated Universal Time)
>>>>>>> a65d7df55f79b0544c825a1dda116352d0b3956b
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
