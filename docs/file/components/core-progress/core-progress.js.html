<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../">
  <title data-ice="title">components/core-progress/core-progress.js | thanos</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="Team 05 code repo"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="thanos"><meta property="twitter:description" content="Team 05 code repo"></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/ucsd-cse112/thanO5"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  </ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">components/core-progress/core-progress.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">// import templateString from &apos;./element-image.html&apos;;
import styleString from &apos;./core-progress.scss&apos;;

// create template element
// const template = document.createElement(&apos;template&apos;);
// template.innerHTML = templateString;

// create style element
const style = document.createElement(&apos;style&apos;);
style.innerHTML = styleString;

/**
 * &lt;element-image&gt; component
 */
class CoreProgress extends HTMLElement {
  /**
   * constructor
   */
  constructor() {
    super();

    this._type = this.getAttribute(&apos;type&apos;) || &apos;line&apos;;
    this._percentage = this.getAttribute(&apos;percentage&apos;) || 0;
    this._status = this.getAttribute(&apos;status&apos;) || undefined;
    this._strokeWidth = this.getAttribute(&apos;stroke-width&apos;) || 6;
    this._textInside = this.hasAttribute(&apos;text-inside&apos;) || false;
    this._width = this.getAttribute(&apos;width&apos;) || 126;
    this._showText = this.hasAttribute(&apos;show-text&apos;) || false;
    this._color = this.getAttribute(&apos;color&apos;) || undefined;

    this.attachShadow({mode: &apos;open&apos;});
    this._template = document.createElement(&apos;template&apos;);
    this._updateTemplate();
  }

  /**
   * type getter
   */
  get type() {
    return this._type;
  }

  /**
   * type setter
   * @param {*} val
   */
  set type(val) {
    if ([&apos;line&apos;, &apos;circle&apos;].indexOf(val) &gt; -1) {
      this._type = val;
      this.setAttribute(&apos;type&apos;, val);
    } else {
      this._type = &apos;line&apos;;
      this.setAttribute(&apos;type&apos;, &apos;line&apos;);
    }

    this._updateTemplate();
  }

  /**
   * percentage setter
   */
  get percentage() {
    return this._percentage;
  }

  /**
   * percentage setter
   * @param {*} val
   */
  set percentage(val) {
    if (typeof val === &apos;number&apos; &amp;&amp; val &lt;= 100 &amp;&amp; val &gt;= 0) {
      this._percentage = val;
      this.setAttribute(&apos;percentage&apos;, val);
    } else {
      this._percentage = 0;
      this.setAttribute(&apos;percentage&apos;, 0);
    }

    this._updateTemplate();
  }

  /**
   * status getter
   */
  get status() {
    return this._status;
  }

  /**
   * status setter
   * @param {*} val
   */
  set status(val) {
    if ([&apos;success&apos;, &apos;exception&apos;, &apos;text&apos;].indexOf(val) &gt; -1) {
      this._status = val;
      this.setAttribute(&apos;status&apos;, val);
    } else {
      this._status = undefined;
      this.removeAttribute(&apos;status&apos;);
    }

    this._updateTemplate();
  }

  /**
   * strokeWidth getter
   */
  get strokeWidth() {
    return this._strokeWidth;
  }

  /**
   * strokeWidth setter
   * @param {*} val
   */
  set strokeWidth(val) {
    if (typeof val === &apos;number&apos;) {
      this._strokeWidth = val;
      this.setAttribute(&apos;stroke-width&apos;, val);
    } else {
      this._strokeWidth = 6;
      this.setAttribute(&apos;stroke-width&apos;, 6);
    }

    this._updateTemplate();
  }

  /**
   * textInside getter
   */
  get textInside() {
    return this._textInside;
  }

  /**
   * textInside setter
   * @param {*} val
   */
  set textInside(val) {
    if (val === true) {
      this._textInside = true;
      this.setAttribute(&apos;text-inside&apos;, &apos;&apos;);
    } else {
      this._textInside = false;
      this.removeAttribute(&apos;text-inside&apos;);
    }

    this._updateTemplate();
  }

  /**
   * width getter
   */
  get width() {
    return this._width;
  }

  /**
   * width setter
   * @param {*} val
   */
  set width(val) {
    if (typeof val === &apos;number&apos;) {
      this._width = val;
      this.setAttribute(&apos;width&apos;, val);
    } else {
      this._width = 126;
      this.setAttribute(&apos;width&apos;, 126);
    }

    this._updateTemplate();
  }

  /**
   * showText getter
   */
  get showText() {
    return this._showText;
  }

  /**
   * showText setter
   * @param {*} val
   */
  set showText(val) {
    if (val === true) {
      this._showText = true;
      this.setAttribute(&apos;show-text&apos;, &apos;&apos;);
    } else {
      this._showText = false;
      this.removeAttribute(&apos;show-text&apos;);
    }

    this._updateTemplate();
  }

  /**
   * color getter
   */
  get color() {
    return this._color;
  }

  /**
   * color setter
   * @param {*} val
   */
  set color(val) {
    if (typeof val === &apos;string&apos;) {
      this._color = val;
      this.setAttribute(&apos;color&apos;, val);
    } else {
      this._color = undefined;
      this.removeAttribute(&apos;color&apos;);
    }

    this._updateTemplate();
  }

  /**
   * _updateTemplate()
   */
  _updateTemplate() {
    let progressBar = &apos;&apos;;
    let progressCircle = &apos;&apos;;

    if (this.type === &apos;line&apos;) {
      progressBar = `
        &lt;div class=&quot;el-progress-bar&quot;&gt;
          &lt;div 
            class=&quot;el-progress-bar__outer&quot; 
            style=&quot;height: ${this.strokeWidth + &apos;px&apos;};&quot;
          &gt;
            &lt;div class=&quot;el-progress-bar__inner&quot; style=&quot;${this.barStyle}&quot;&gt;
              ${(this.showText &amp;&amp; this.textInside) ? `&lt;div class=&quot;el-progress-bar__innerText&quot;&gt;${this.percentage}%&lt;/div&gt;` : &apos;&apos;}
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      `;
    } else {
      progressCircle = `
        &lt;div class=&quot;el-progress-circle&quot; style=&quot;height: ${this.width + &apos;px&apos;}; width: ${this.width + &apos;px&apos;}&quot;&gt;
          &lt;svg viewBox=&quot;0 0 100 100&quot;&gt;
            &lt;path 
              class=&quot;el-progress-circle__track&quot; 
              d=&quot;${this.trackPath}&quot; 
              stroke=&quot;#e5e9f2&quot; 
              stroke-width=${this.relativeStrokeWidth} 
              fill=&quot;none&quot;&gt;
            &lt;/path&gt;
            &lt;path 
              class=&quot;el-progress-circle__path&quot; 
              d=&quot;${this.trackPath}&quot; 
              stroke-linecap=&quot;round&quot; 
              stroke=${this.stroke} 
              stroke-width=${this.relativeStrokeWidth} 
              fill=&quot;none&quot; 
              style=&quot;${this.circlePathStyle}&quot;&gt;
            &lt;/path&gt;
          &lt;/svg&gt;
        &lt;/div&gt;
      `;
    }

    this._template.innerHTML = `
      &lt;div
        class=&quot;${`el-progress el-progress--${this.type} 
          ${this.status !== undefined ? `is-${this.status}` : ``} 
          ${!this.showText ? &apos;el-progress--without-text&apos; : &apos;&apos;} 
          ${this.textInside ? &apos;el-progress--text-inside&apos; : &apos;&apos;}`}&quot;
        role=&quot;progressbar&quot;
        aria-valuenow=${this.percentage}
        aria-valuemin=&quot;0&quot;
        aria-valuemax=&quot;100&quot;
      &gt;
        ${progressBar}
        ${progressCircle}
        ${(this.showText &amp;&amp; !this.textInside) ? ` 
          &lt;div class=&quot;el-progress__text&quot; style=&quot;font-size: ${this.progressTextSize + &apos;px&apos;}&quot;&gt;
            ${this.status === undefined ? `${this.percentage}%` : `&lt;i class=${this.iconClass}&gt;&lt;/i&gt;`}
          &lt;/div&gt;` : &apos;&apos;}
      &lt;/div&gt;
    `;

    this.shadowRoot.innerHTML = &apos;&apos;;
    this.shadowRoot.appendChild(this._template.content);
    this.shadowRoot.appendChild(style.cloneNode(true));
  }

  /**
   * barStyle getter
   */
  get barStyle() {
    return `width: ${this.percentage + &apos;%&apos;};` + ` ${this.color === null ? &apos;&apos; : &apos;background-color: &apos; + this.color + &apos;;&apos;}`;
  }

  /**
   * relativeStrokeWidth getter
   */
  get relativeStrokeWidth() {
    return (this.strokeWidth / this.width * 100).toFixed(1);
  }

  /**
   * trackPath getter
   */
  get trackPath() {
    const radius = parseInt(50 - parseFloat(this.relativeStrokeWidth) / 2, 10);
    return `M 50 50 m 0 -${radius} a ${radius} ${radius} 0 1 1 0 ${radius * 2} a ${radius} ${radius} 0 1 1 0 -${radius * 2}`;
  }

  /**
   * perimeter getter
   */
  get perimeter() {
    const radius = 50 - parseFloat(this.relativeStrokeWidth) / 2;
    return 2 * Math.PI * radius;
  }

  /**
   * circlePathStyle getter
   */
  get circlePathStyle() {
    const perimeter = this.perimeter;
    return `stroke-dasharray: ${perimeter}px ${perimeter}px; ` +
      `stroke-dashoffset: ${(1 - this.percentage / 100) * perimeter + &apos;px&apos;}; ` +
      `transition: stroke-dashoffset 0.6s ease 0s, stroke 0.6s ease;`;
  }

  /**
   * stroke getter
   */
  get stroke() {
    let ret;
    if (this.color) {
      ret = this.color;
    } else {
      switch (this.status) {
        case &apos;success&apos;:
          ret = &apos;#13ce66&apos;;
          break;
        case &apos;exception&apos;:
          ret = &apos;#ff4949&apos;;
          break;
        default:
          ret = &apos;#20a0ff&apos;;
      }
    }
    return ret;
  }

  /**
   * iconClass getter
   */
  get iconClass() {
    if (this.type === &apos;line&apos;) {
      return this.status === &apos;success&apos; ? &apos;el-icon-circle-check&apos; : &apos;el-icon-circle-close&apos;;
    } else {
      return this.status === &apos;success&apos; ? &apos;el-icon-check&apos; : &apos;el-icon-close&apos;;
    }
  }

  /**
   * progressTextSize getter
   */
  get progressTextSize() {
    return this.type === &apos;line&apos;
      ? 12 + this.strokeWidth * 0.4
      : this.width * 0.111111 + 2;
  }
}

if (!customElements.get(&apos;core-progress&apos;)) {
  customElements.define(&apos;core-progress&apos;, CoreProgress);
}
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
