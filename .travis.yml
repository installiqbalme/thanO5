language: node_js
node_js:
- 11.14.0
dist: xenial
services:
- xvfb
addons:
  firefox: latest
notifications:
  slack:
    rooms:
      secure: Ao/NkPv/FgZmxky96Tc+9EPF9tOommHRjKE1hlq520LS3ENLcrPH1Gw5AmRq3uzl0kRKl+sdS3j/877bvzNvj4sPoy/6reVzeA8Y7ZwlpX25sJdazcrNW9q53x5h/u5UPA94i7enDYQDigycA/wWBMd7xhhS4o6dCRIOOIKGx5MdULrtyiY0af86uYFW2VLQUKXyW3DBgQx68htmUXgLRjMvm9ShLUxtg+W8lprHI+yzx46U+DD7ftxd7XXN0K/r5ZDgzeLtOz3jRY0x3BiYK/9z/BV9aKEhTIXx9ymVRjpTv4mU310zPu/UXbUd1MbLp/nCop6isnAQOWFqWyWv2Cc84stVVZxmZdUnyrleelk/NCQInQZGf29j+WJBA/JMeIW6zcwilVxW3zsrpXakEFHVZktsdLT1B7rsSEyy1PuGSpDCIDpaaXPidYFvh2uWAN9aBKyTvbA/u3cM/2NB4i/PEQT0ckP4Lg87azoVyaaYiDqLKP/l8oAZRXqVGV61YHOgrmxkgCC6UcSWAoGA2xQObc4uuZx+AjuPk+PW2czst5GciPX8AKE96B4y3hV5sdg2/jaW8bwPffZRR2n3hqTgR4Wxk/3wxXOeQ8LudU3oZkg5kOIGJXlbkXGisK1ur6HqGplODw0FVT9f/Q/1NE5pPzT8yiUVlIc8OcHozTw=
env:
  global:
  - secure: RqBH4dKxTX3L7trDYc+e1CHsSNDU90lVAz95rR4jW0Y38pH1zWWYvgheq7Z9dSOD7sJEPx8dKVxx5MHl1yTx28OSqkK+AipNc2yC94jRMSefVgIbTVDjizGhLe1pToy2RzBGqpPmpEvUfEASiZ/43eO/qKvCJMNefUHYrU2MUc1iCMEgk0R0Kll0uv/26FuQ4y7CKAGztSeuezX+79fClkdYdkEFpkJ5jl/vJcz1PVgnMXFK5V1KsH874hQuG8Oe1qzBgMpZNzUsrUfEPuACEw3fjZ4MQnb5aqOZN71RwbIfgKEwn8vhMnq1nAsc6G3lbhrAZBDbYXDIzov+5U4RhMwQR8zzuyvDi9qOs3eGzBkjIfmPWyyAFPZnJ07GxHQW/EgnmY+05uWx3/Qj41+jeVAmGbI426h//0765szadWoJYjh/8B/M8KQDSItR2qPFloHuQgqnxwmtblRcDtYUHUtg2KEeiOzJbROr8/jeisrgPfIhEkA7i1B4t9fTtjMcOPw5QahgmsYxmJxWQim2BvtI2dBDE4etMLAewhFZZzLDV9plPyfo+thjuOebDPCUlqGEXic/bS+xAIISo2zhIAWhdh2ILsPBBV8IFn0du6mcr7sDBcqlakrX2wY6IkYmKeFkHxYnmZSGSptpfvutom/AOMd4azNEJ73ZnrSHT2Y=
before_install:
- curl -L https://codeclimate.com/downloads/test-reporter/test-reporter-latest-linux-amd64
  > ./cc-test-reporter
- chmod +x ./cc-test-reporter
- "./cc-test-reporter before-build"
before_script:
- npm install
script:
- export BRANCH=$(if [ "$TRAVIS_PULL_REQUEST" == "false" ]; then echo $TRAVIS_BRANCH;
  else echo $TRAVIS_PULL_REQUEST_BRANCH; fi)
- echo "TRAVIS_BRANCH=$TRAVIS_BRANCH, PR=$PR, BRANCH=$BRANCH"
- npm run lint
- npm test
- npm run browsertest
- npm run docs
after_success:
- bash scripts/after_script.sh $TRAVIS_PULL_REQUEST
