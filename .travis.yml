language: node_js
node_js:
- 11.14.0
dist: xenial
services:
- xvfb
addons:
  firefox: latest
notifications:
  slack:
    rooms:
    - secure: Sle7rpXR02PzpQt+uqpV8Gk8l/tI69XK5vQy+8kKcVxV5aEhaI8s3H1se7d/hAhB2NFlwtpwizCh7DadA9kTvAp/Fy1LaMcgUIix31HjdK6gCcBnFkcvYryfEF2D3cCuoGwrRjKZGblcOOzly6ZPNBZjn+Vqe2aHIKifJLGFYg6XJbkCi8WiEt9TXhF/6q4R3do6BrqvsUrP3FGF8PmEqltk9Z3EXvEFa2CRZeNmuV/VIQ0UqD5UHlILKp4LqI0W2zHMU93syHCuVdo5YYc+SLK94C/uzgc2K+Ru87ZYz77ukM16BHHaha5o8RLdHDBhFcjl0wkhvTW6OKwyiwiR+wx232q9vRD97ELaaSKiJbb1y5dlT94FYilk5sQO6E5bEQpU9LNW947kYsVbb0LYIYQFqZ0/d11zwSXmAiNxUb5ivQAXTBpehFd7zYg85S+2CoKsAkAn1bVL8IEtsBxthFTEnsr1bnHi5d6W0RPvAKNdojINfsU/j0cN51YpGbNhnfN5apqnAvyW+EEXNN5A8i0PdPEk458SkgPvxFL2gThMaU/PRnbln8gdcDpzuy6fMqB2lOVSn4hItJzEJebUYW2N16vrkleRa3puTbIX3IXaR0Z1JQ5ySrV3PN9YE7MH8me6u3JJeK6/XtHvrwC81HkNFUD1LYvSeAOYuB8yft0=
env:
  global:
  - secure: C0oN9Wat1oEkz/TH3HYVb0w5y8MeYheqe6FVv/XLsvF8jf1SoRZJUzZaVmeafpIwKExvyfSoA7OMpsFFMQubIkgRlFuBmq7R4PmgNTtPDUkFUHfljFUh8X2ml/ymm35GK33WNh0EOBBCrsjHsTNolemHryExlboqxfOdG9xKjlk8O3T5Xeu8YnU1RCa74m9mS3BsMuw9qXlTBfbjBrrGKBGyjQXOsLgM8gU0mkbTEyJgEqcvjnw+HSxNRgUxTeBv3/LQYJ4l67vpZU6ORtOzslE1eVMPZ2I4XHNhfuYgoUY7BYC6BKOyGJgHJX+x/9sPZ+cQkse2JwfNEH7fE11qXXgVh3zhxwqiWoCcKtGYZ9myRevofrpr/6XanCGXX/gk+dnPlDsIFAIx/OfzlXDUoxaDMZLH/xmwCOAvLQ7ydPaWMng1zKBZRSFWa1+DKusBapuT/MmqNGx2Vs9uW0ebZgbSIVCc7rOXDE6viXDIAO7b189/f1gl4yVLc80y6U5eLDD08xRDVp30X2UFW4SHRq9GhCmbqOd58WK3+7A0S+n2gnquXH6Qu7bpjk1lhu133wbftz+vkXTpMy7PnSEB5Q7oSyhEQALE2CJDCZhcx8vhggF2YFk58xD1gqn4WQ4ArT1scyNjQ+O6VSjx9i3Vx8D8GZ40GL6tuWN34MbtXaQ=
before_install:
- curl -L https://codeclimate.com/downloads/test-reporter/test-reporter-latest-linux-amd64
  > ./cc-test-reporter
- chmod +x ./cc-test-reporter
- "./cc-test-reporter before-build"
before_script:
- npm install
script:
- export BRANCH=$(if [ "$TRAVIS_PULL_REQUEST" == "false" ]; then echo $TRAVIS_BRANCH;
  else echo $TRAVIS_PULL_REQUEST_BRANCH; fi)
- echo "TRAVIS_BRANCH=$TRAVIS_BRANCH, PR=$PR, BRANCH=$BRANCH"
- npm run lint
- npm test
- npm run browsertest
- npm run docs
after_success:
- bash scripts/after_script.sh $TRAVIS_PULL_REQUEST
