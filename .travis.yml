language: node_js
node_js:
- 11.14.0
dist: xenial
services:
- xvfb
addons:
  firefox: latest
notifications:
  slack:
    rooms:
    - secure: Sle7rpXR02PzpQt+uqpV8Gk8l/tI69XK5vQy+8kKcVxV5aEhaI8s3H1se7d/hAhB2NFlwtpwizCh7DadA9kTvAp/Fy1LaMcgUIix31HjdK6gCcBnFkcvYryfEF2D3cCuoGwrRjKZGblcOOzly6ZPNBZjn+Vqe2aHIKifJLGFYg6XJbkCi8WiEt9TXhF/6q4R3do6BrqvsUrP3FGF8PmEqltk9Z3EXvEFa2CRZeNmuV/VIQ0UqD5UHlILKp4LqI0W2zHMU93syHCuVdo5YYc+SLK94C/uzgc2K+Ru87ZYz77ukM16BHHaha5o8RLdHDBhFcjl0wkhvTW6OKwyiwiR+wx232q9vRD97ELaaSKiJbb1y5dlT94FYilk5sQO6E5bEQpU9LNW947kYsVbb0LYIYQFqZ0/d11zwSXmAiNxUb5ivQAXTBpehFd7zYg85S+2CoKsAkAn1bVL8IEtsBxthFTEnsr1bnHi5d6W0RPvAKNdojINfsU/j0cN51YpGbNhnfN5apqnAvyW+EEXNN5A8i0PdPEk458SkgPvxFL2gThMaU/PRnbln8gdcDpzuy6fMqB2lOVSn4hItJzEJebUYW2N16vrkleRa3puTbIX3IXaR0Z1JQ5ySrV3PN9YE7MH8me6u3JJeK6/XtHvrwC81HkNFUD1LYvSeAOYuB8yft0=
env:
  global:
  - secure: RqBH4dKxTX3L7trDYc+e1CHsSNDU90lVAz95rR4jW0Y38pH1zWWYvgheq7Z9dSOD7sJEPx8dKVxx5MHl1yTx28OSqkK+AipNc2yC94jRMSefVgIbTVDjizGhLe1pToy2RzBGqpPmpEvUfEASiZ/43eO/qKvCJMNefUHYrU2MUc1iCMEgk0R0Kll0uv/26FuQ4y7CKAGztSeuezX+79fClkdYdkEFpkJ5jl/vJcz1PVgnMXFK5V1KsH874hQuG8Oe1qzBgMpZNzUsrUfEPuACEw3fjZ4MQnb5aqOZN71RwbIfgKEwn8vhMnq1nAsc6G3lbhrAZBDbYXDIzov+5U4RhMwQR8zzuyvDi9qOs3eGzBkjIfmPWyyAFPZnJ07GxHQW/EgnmY+05uWx3/Qj41+jeVAmGbI426h//0765szadWoJYjh/8B/M8KQDSItR2qPFloHuQgqnxwmtblRcDtYUHUtg2KEeiOzJbROr8/jeisrgPfIhEkA7i1B4t9fTtjMcOPw5QahgmsYxmJxWQim2BvtI2dBDE4etMLAewhFZZzLDV9plPyfo+thjuOebDPCUlqGEXic/bS+xAIISo2zhIAWhdh2ILsPBBV8IFn0du6mcr7sDBcqlakrX2wY6IkYmKeFkHxYnmZSGSptpfvutom/AOMd4azNEJ73ZnrSHT2Y=
before_install:
- curl -L https://codeclimate.com/downloads/test-reporter/test-reporter-latest-linux-amd64
  > ./cc-test-reporter
- chmod +x ./cc-test-reporter
- "./cc-test-reporter before-build"
before_script:
- npm install
script:
- export BRANCH=$(if [ "$TRAVIS_PULL_REQUEST" == "false" ]; then echo $TRAVIS_BRANCH;
  else echo $TRAVIS_PULL_REQUEST_BRANCH; fi)
- echo "TRAVIS_BRANCH=$TRAVIS_BRANCH, PR=$PR, BRANCH=$BRANCH"
- npm run lint
- npm test
- npm run browsertest
- npm run docs
after_success:
- bash scripts/after_script.sh $TRAVIS_PULL_REQUEST
